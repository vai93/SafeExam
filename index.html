<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styleIndex.css">
</head>
<body>
    <div id="root" class="min-h-screen theme-blue p-6 relative transition-colors duration-300">

        <!-- Main Content -->
        <div class="max-w-4xl mx-auto pt-16 flex flex-col items-center gap-8" style="margin-top:-45px">
            <!-- Title -->
            <h1 class="text-4xl font-bold text-center title">
                Welcome to the Compier Design Quiz
            </h1>

            <!-- Instructions Card -->
            <div class="card w-full max-w-2xl">
                <div class="card-header">
                    <h2 class="card-title">Instructions</h2>
                </div>
                <div class="card-content">
                    <ul>
                        <li>Switching tabs, windows, or minimizing the fullscreen is strictly prohibited. 
                            In such cases, the quiz will be <b>automatically submitted</b>.</li> 
                        <li>If multiple responses are found, the <b>first response </b>will be considered the <b>final</b> score.</li>
                        <li>You can see the timer in the top to track your progress.</li>
                        <li>Once you start the quiz, you cannot pause or restart it.</li>
                        <li>Make sure you have a stable internet connection.</li>
                    </ul>
                </div>
            </div>
             <div class="card w-full max-w-2xl">
            <form id="quizForm">
                <div class="mb-3">
                    <label for="RollNumber" class="form-label">RollNumber</label>
                    <input type="number" class="form-control" id="rollNumber" name="rollNumber"required>
                  </div>
                  <div class="mb-3">
                    <label for="uniqueKey" class="form-label">Unique Key</label>
                    <input type="text" class="form-control" id="uniqueKey" name="uniqueKey" required>
                </div>
                
                <center>
                <button type="submit" class="button button-primary button-large">
                    Start Quiz
                </button></center>
              </form>
            </div>
    
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    <footer style="background: linear-gradient(180deg, rgb(240, 247, 255) 0%, rgb(255, 255, 255) 100%); color: #333; margin-top: 100px; padding: 20px 0;">
        <div style="display: flex; justify-content: space-between; align-items: center;margin-top:50px;padding-top:50px; padding: 0 20px;">
            <p>Â© 2025 NUV Group, All rights reserved.</p>
            <p style="text-align: right;">Designed & Developed By Vaibhavi Patel</p>
        </div>
    </footer>
    

<script type="module">
    import { setDoc, doc,getDoc ,collection } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-firestore.js";
    import { db } from "./firebase.js";
    document.getElementById('quizForm').addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent default form submission
            const rollNumber = document.getElementById('rollNumber').value.trim();
            sessionStorage.setItem('rollNumber', rollNumber);
            const uniqueKey = String(document.getElementById('uniqueKey').value.trim());
            try {
                const studentDoc = doc(db, 'StudentDetails', rollNumber);
                const docSnap = await getDoc(studentDoc);

                if (docSnap.exists()) {
                    const data = docSnap.data();
                    console.log(data.uniqueKey);
                    console.log(data);
                    if (String(data.uniqueKey) === uniqueKey) {
                        alert('Validation successful! Starting quiz.');
                        window.location.href = 'mcq.html'; // Redirect to quiz
                    } else {
                        alert('Invalid unique key. Please try again.');
                    }
                } else {
                    alert('Roll number not found. Please enter a valid roll number.');
                }
            } catch (error) {
                console.error('Error validating student:', error);
                alert('An error occurred during validation. Please try again later.');
            }
        });
    // function validateRollNumber() {
    //     rollNumber=parseInt(document.getElementById("rollNumber").value);
    //     allowedRollNumbers = [1, 8, 9, 10, 15,2,3,4,5,6,7,11,12,13,14];
    //     if (allowedRollNumbers.includes(rollNumber)) {
    //         return true; 
    //     }
    //     alert("Invalid roll number. Please enter a valid roll number.");
    //     return false; 
        
    // }
</script>
</body>
</html>
